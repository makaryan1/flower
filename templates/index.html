
{% extends "base.html" %}

{% block title %}{{ get_text('site_title') }}{% endblock %}

{% block content %}
<!-- Hero Banner -->
<div class="hero-banner" style="background: linear-gradient(135deg, #FF69B4 0%, #FF1493 100%); padding: 80px 0;">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 text-white">
                <h1 class="display-4 fw-bold mb-4">{{ get_text('welcome_title') }}</h1>
                <p class="lead mb-4">{{ get_text('welcome_subtitle') }}</p>
                <div class="hero-features mb-4">
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-shipping-fast me-3 fa-lg"></i>
                        <span>Доставка за 2 часа по Ахалцихе</span>
                    </div>
                    <div class="d-flex align-items-center mb-2">
                        <i class="fas fa-shield-alt me-3 fa-lg"></i>
                        <span>Гарантия свежести 7 дней</span>
                    </div>
                    <div class="d-flex align-items-center">
                        <i class="fas fa-heart me-3 fa-lg"></i>
                        <span>Более 1000+ довольных клиентов</span>
                    </div>
                </div>
                <div class="hero-actions">
                    <a href="{{ url_for('catalog') }}" class="btn btn-light btn-lg me-3">
                        <i class="fas fa-shopping-bag me-2"></i>{{ get_text('view_catalog') }}
                    </a>
                    <a href="#categories" class="btn btn-outline-light btn-lg">
                        Категории
                    </a>
                </div>
            </div>
            <div class="col-lg-6 text-center">
                <img src="https://via.placeholder.com/500x400/ffffff/FF69B4?text=Цветы" 
                     class="img-fluid rounded-3 shadow-lg" alt="Flowers" style="max-width: 400px;">
            </div>
        </div>
    </div>
</div>

<!-- Promotional Banners -->
<div class="promo-section py-4" style="background-color: #f8f9fa;">
    <div class="container">
        <div class="row g-3">
            <div class="col-lg-4 col-md-6">
                <div class="promo-card bg-success text-white p-4 rounded-3 h-100">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-truck fa-3x me-3"></i>
                        <div>
                            <h5 class="mb-1">{{ get_text('fast_delivery') }}</h5>
                            <p class="mb-0 small">{{ get_text('delivery_text') }}</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="promo-card bg-info text-white p-4 rounded-3 h-100">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-seedling fa-3x me-3"></i>
                        <div>
                            <h5 class="mb-1">{{ get_text('fresh_flowers') }}</h5>
                            <p class="mb-0 small">{{ get_text('fresh_text') }}</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="promo-card bg-warning text-white p-4 rounded-3 h-100">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-certificate fa-3x me-3"></i>
                        <div>
                            <h5 class="mb-1">{{ get_text('quality_guarantee') }}</h5>
                            <p class="mb-0 small">{{ get_text('quality_text') }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Flash Sale Banner -->
<div class="flash-sale-banner bg-danger text-white py-3">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6">
                <div class="d-flex align-items-center">
                    <i class="fas fa-bolt fa-2x me-3 text-warning"></i>
                    <div>
                        <h5 class="mb-1">Акция дня!</h5>
                        <p class="mb-0">Скидка до 30% на все букеты</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 text-end">
                <div class="countdown d-flex align-items-center justify-content-end">
                    <span class="me-3">Осталось:</span>
                    <div class="countdown-timer">
                        <span id="hours" class="badge bg-dark fs-6 me-1">12</span>
                        <span class="me-1">:</span>
                        <span id="minutes" class="badge bg-dark fs-6 me-1">34</span>
                        <span class="me-1">:</span>
                        <span id="seconds" class="badge bg-dark fs-6">56</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Categories Section -->
<section id="categories" class="categories-section py-5">
    <div class="container">
        <div class="row mb-4">
            <div class="col-12 text-center">
                <h2 class="section-title mb-3">{{ get_text('categories') }}</h2>
                <p class="text-muted">Выберите категорию цветов</p>
            </div>
        </div>
        <div class="row g-4">
            <div class="col-lg-2 col-md-4 col-6">
                <a href="{{ url_for('catalog', category='roses') }}" class="category-card text-decoration-none">
                    <div class="card border-0 shadow-sm h-100 text-center category-hover">
                        <div class="card-body p-4">
                            <div class="category-icon mb-3">
                                <i class="fas fa-rose fa-3x text-danger"></i>
                            </div>
                            <h6 class="card-title mb-2">{{ get_text('roses') }}</h6>
                            <p class="small text-muted mb-0">{{ Product.query.filter_by(category='roses').count() }} товаров</p>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-2 col-md-4 col-6">
                <a href="{{ url_for('catalog', category='tulips') }}" class="category-card text-decoration-none">
                    <div class="card border-0 shadow-sm h-100 text-center category-hover">
                        <div class="card-body p-4">
                            <div class="category-icon mb-3">
                                <i class="fas fa-seedling fa-3x text-success"></i>
                            </div>
                            <h6 class="card-title mb-2">{{ get_text('tulips') }}</h6>
                            <p class="small text-muted mb-0">{{ Product.query.filter_by(category='tulips').count() }} товаров</p>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-2 col-md-4 col-6">
                <a href="{{ url_for('catalog', category='orchids') }}" class="category-card text-decoration-none">
                    <div class="card border-0 shadow-sm h-100 text-center category-hover">
                        <div class="card-body p-4">
                            <div class="category-icon mb-3">
                                <i class="fas fa-leaf fa-3x text-info"></i>
                            </div>
                            <h6 class="card-title mb-2">{{ get_text('orchids') }}</h6>
                            <p class="small text-muted mb-0">{{ Product.query.filter_by(category='orchids').count() }} товаров</p>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-2 col-md-4 col-6">
                <a href="{{ url_for('catalog', category='bouquets') }}" class="category-card text-decoration-none">
                    <div class="card border-0 shadow-sm h-100 text-center category-hover">
                        <div class="card-body p-4">
                            <div class="category-icon mb-3">
                                <i class="fas fa-gift fa-3x text-primary"></i>
                            </div>
                            <h6 class="card-title mb-2">{{ get_text('bouquets') }}</h6>
                            <p class="small text-muted mb-0">{{ Product.query.filter_by(category='bouquets').count() }} товаров</p>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-2 col-md-4 col-6">
                <a href="{{ url_for('catalog', category='potted') }}" class="category-card text-decoration-none">
                    <div class="card border-0 shadow-sm h-100 text-center category-hover">
                        <div class="card-body p-4">
                            <div class="category-icon mb-3">
                                <i class="fas fa-seedling fa-3x text-warning"></i>
                            </div>
                            <h6 class="card-title mb-2">{{ get_text('potted') }}</h6>
                            <p class="small text-muted mb-0">{{ Product.query.filter_by(category='potted').count() }} товаров</p>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-lg-2 col-md-4 col-6">
                <a href="{{ url_for('catalog') }}" class="category-card text-decoration-none">
                    <div class="card border-0 shadow-sm h-100 text-center category-hover">
                        <div class="card-body p-4">
                            <div class="category-icon mb-3">
                                <i class="fas fa-th fa-3x text-secondary"></i>
                            </div>
                            <h6 class="card-title mb-2">Все товары</h6>
                            <p class="small text-muted mb-0">{{ Product.query.count() }} товаров</p>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Popular Products -->
<section class="popular-products py-5" style="background-color: #f8f9fa;">
    <div class="container">
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h2 class="section-title mb-2">{{ get_text('popular_products') }}</h2>
                        <p class="text-muted mb-0">Самые популярные товары недели</p>
                    </div>
                    <a href="{{ url_for('catalog') }}" class="btn btn-outline-primary">
                        {{ get_text('view_all') }} <i class="fas fa-arrow-right ms-1"></i>
                    </a>
                </div>
            </div>
        </div>
        
        {% if products %}
        <div class="row g-3">
            {% for product in products %}
            <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6">
                <div class="card border-0 shadow-sm h-100 product-card">
                    <div class="position-relative">
                        <img src="{{ product.image_url or 'https://via.placeholder.com/300x200/FF69B4/ffffff?text=' + get_text(product.category) }}" 
                             class="card-img-top" alt="{{ product.name }}" style="height: 200px; object-fit: cover;">
                        
                        <!-- Badges -->
                        <div class="position-absolute top-0 start-0 m-2">
                            <span class="badge bg-success">{{ get_text(product.category) }}</span>
                        </div>
                        
                        <div class="position-absolute top-0 end-0 m-2">
                            <span class="badge bg-danger">-{{ range(10, 40) | random }}%</span>
                        </div>

                        <!-- Quick Actions -->
                        <div class="position-absolute bottom-0 end-0 m-2 quick-actions">
                            <button class="btn btn-sm btn-light rounded-circle me-1" title="В избранное">
                                <i class="fas fa-heart"></i>
                            </button>
                            <a href="{{ url_for('product_detail', id=product.id) }}" class="btn btn-sm btn-light rounded-circle" title="Быстрый просмотр">
                                <i class="fas fa-eye"></i>
                            </a>
                        </div>

                        {% if product.stock <= 0 %}
                            <div class="position-absolute top-50 start-50 translate-middle">
                                <span class="badge bg-dark fs-6 px-3 py-2">{{ get_text('out_of_stock') }}</span>
                            </div>
                        {% endif %}
                    </div>
                    
                    <div class="card-body d-flex flex-column">
                        <h6 class="card-title mb-2">{{ product.name }}</h6>
                        
                        <!-- Rating -->
                        <div class="rating mb-2">
                            <div class="stars text-warning small">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                            </div>
                            <span class="text-muted small ms-1">({{ range(50, 300) | random }})</span>
                        </div>

                        <!-- Price -->
                        <div class="price-section mb-3">
                            <div class="d-flex align-items-baseline">
                                <span class="price text-danger fw-bold fs-5">₽{{ "%.0f"|format(product.price) }}</span>
                                <span class="original-price text-muted small text-decoration-line-through ms-2">
                                    ₽{{ "%.0f"|format(product.price * 1.3) }}
                                </span>
                            </div>
                            <div class="shipping-info">
                                <small class="text-success">
                                    <i class="fas fa-shipping-fast me-1"></i>Быстрая доставка
                                </small>
                            </div>
                        </div>

                        <!-- Stock -->
                        {% if product.stock > 0 %}
                            <div class="stock-bar mb-3">
                                <div class="d-flex justify-content-between align-items-center mb-1">
                                    <small class="text-muted">Осталось:</small>
                                    <small class="text-danger fw-bold">{{ product.stock }} шт.</small>
                                </div>
                                <div class="progress" style="height: 4px;">
                                    <div class="progress-bar bg-danger" style="width: {{ (product.stock / 100 * 80) }}%"></div>
                                </div>
                            </div>
                        {% endif %}

                        <!-- Actions -->
                        <div class="mt-auto">
                            <div class="d-grid gap-2">
                                {% if product.stock > 0 %}
                                    <button onclick="addToCart({{ product.id }})" class="btn text-white btn-sm fw-semibold" 
                                            style="background: linear-gradient(45deg, #FF69B4, #FF1493);">
                                        <i class="fas fa-shopping-cart me-1"></i>{{ get_text('add_to_cart') }}
                                    </button>
                                {% else %}
                                    <button class="btn btn-secondary btn-sm" disabled>
                                        <i class="fas fa-times me-1"></i>{{ get_text('out_of_stock') }}
                                    </button>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</section>

<!-- Special Offers -->
<section class="special-offers py-5">
    <div class="container">
        <div class="row mb-4">
            <div class="col-12 text-center">
                <h2 class="section-title mb-3">Специальные предложения</h2>
                <p class="text-muted">Не упустите выгодные предложения</p>
            </div>
        </div>
        <div class="row g-4">
            <div class="col-lg-6">
                <div class="offer-card bg-gradient-primary text-white p-4 rounded-3 h-100" 
                     style="background: linear-gradient(135deg, #FF69B4, #FF1493);">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <h4 class="mb-3">Свадебные букеты</h4>
                            <p class="mb-4">Скидка 25% на все свадебные композиции при заказе за неделю до события</p>
                            <a href="{{ url_for('catalog', category='bouquets') }}" class="btn btn-light">
                                Подробнее
                            </a>
                        </div>
                        <div class="col-md-4 text-center">
                            <i class="fas fa-heart fa-5x opacity-75"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="offer-card bg-gradient-success text-white p-4 rounded-3 h-100" 
                     style="background: linear-gradient(135deg, #28a745, #20c997);">
                    <div class="row align-items-center">
                        <div class="col-md-8">
                            <h4 class="mb-3">Подписка на цветы</h4>
                            <p class="mb-4">Еженедельная доставка свежих цветов со скидкой 15% на годовую подписку</p>
                            <button class="btn btn-light">
                                Узнать больше
                            </button>
                        </div>
                        <div class="col-md-4 text-center">
                            <i class="fas fa-seedling fa-5x opacity-75"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Customer Reviews -->
<section class="reviews py-5" style="background-color: #f8f9fa;">
    <div class="container">
        <div class="row mb-4">
            <div class="col-12 text-center">
                <h2 class="section-title mb-3">Отзывы клиентов</h2>
                <p class="text-muted">Что говорят наши клиенты</p>
            </div>
        </div>
        <div class="row g-4">
            <div class="col-lg-4">
                <div class="review-card card border-0 shadow-sm h-100">
                    <div class="card-body p-4">
                        <div class="stars text-warning mb-3">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <p class="mb-3">"Прекрасные цветы! Очень свежие и красивые. Доставили точно в срок. Обязательно буду заказывать еще!"</p>
                        <div class="d-flex align-items-center">
                            <img src="https://via.placeholder.com/50x50/FF69B4/ffffff?text=А" 
                                 class="rounded-circle me-3" alt="Avatar">
                            <div>
                                <h6 class="mb-0">Анна Иванова</h6>
                                <small class="text-muted">3 дня назад</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="review-card card border-0 shadow-sm h-100">
                    <div class="card-body p-4">
                        <div class="stars text-warning mb-3">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <p class="mb-3">"Отличный сервис! Заказал букет для жены на годовщину. Цветы были упакованы очень красиво."</p>
                        <div class="d-flex align-items-center">
                            <img src="https://via.placeholder.com/50x50/FF69B4/ffffff?text=М" 
                                 class="rounded-circle me-3" alt="Avatar">
                            <div>
                                <h6 class="mb-0">Михаил Петров</h6>
                                <small class="text-muted">1 неделю назад</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="review-card card border-0 shadow-sm h-100">
                    <div class="card-body p-4">
                        <div class="stars text-warning mb-3">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="far fa-star"></i>
                        </div>
                        <p class="mb-3">"Хорошее качество цветов и быстрая доставка. Единственное - хотелось бы больше вариантов упаковки."</p>
                        <div class="d-flex align-items-center">
                            <img src="https://via.placeholder.com/50x50/FF69B4/ffffff?text=Е" 
                                 class="rounded-circle me-3" alt="Avatar">
                            <div>
                                <h6 class="mb-0">Елена Смирнова</h6>
                                <small class="text-muted">2 недели назад</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
// Add to cart function
function addToCart(productId) {
    window.location.href = `{{ url_for('add_to_cart', product_id=0) }}`.replace('0', productId);
}

// Countdown timer
function updateCountdown() {
    const hours = document.getElementById('hours');
    const minutes = document.getElementById('minutes');
    const seconds = document.getElementById('seconds');
    
    let h = parseInt(hours.textContent);
    let m = parseInt(minutes.textContent);
    let s = parseInt(seconds.textContent);
    
    s--;
    if (s < 0) {
        s = 59;
        m--;
        if (m < 0) {
            m = 59;
            h--;
            if (h < 0) {
                h = 23;
            }
        }
    }
    
    hours.textContent = h.toString().padStart(2, '0');
    minutes.textContent = m.toString().padStart(2, '0');
    seconds.textContent = s.toString().padStart(2, '0');
}

setInterval(updateCountdown, 1000);

// Category hover effects
document.querySelectorAll('.category-hover').forEach(card => {
    card.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-10px)';
        this.style.transition = 'transform 0.3s ease';
    });
    
    card.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0)';
    });
});

// Product card hover effects
document.querySelectorAll('.product-card').forEach(card => {
    card.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-5px)';
        this.style.transition = 'transform 0.3s ease';
        const quickActions = this.querySelector('.quick-actions');
        if (quickActions) {
            quickActions.style.opacity = '1';
        }
    });
    
    card.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0)';
        const quickActions = this.querySelector('.quick-actions');
        if (quickActions) {
            quickActions.style.opacity = '0';
        }
    });
});

// Initialize quick actions
document.querySelectorAll('.quick-actions').forEach(actions => {
    actions.style.opacity = '0';
    actions.style.transition = 'opacity 0.3s ease';
});
</script>

<style>
.hero-banner {
    position: relative;
    overflow: hidden;
}

.hero-banner::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="80" r="3" fill="rgba(255,255,255,0.1)"/><circle cx="40" cy="70" r="1" fill="rgba(255,255,255,0.1)"/></svg>');
    opacity: 0.5;
}

.promo-card {
    transition: transform 0.3s ease;
}

.promo-card:hover {
    transform: translateY(-5px);
}

.category-hover {
    transition: all 0.3s ease;
    border-radius: 12px;
}

.category-hover:hover {
    box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
}

.product-card {
    transition: all 0.3s ease;
    border-radius: 12px;
    overflow: hidden;
}

.product-card:hover {
    box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
}

.review-card {
    transition: transform 0.3s ease;
    border-radius: 12px;
}

.review-card:hover {
    transform: translateY(-5px);
}

.offer-card {
    transition: transform 0.3s ease;
    border-radius: 12px;
}

.offer-card:hover {
    transform: translateY(-5px);
}

.section-title {
    font-weight: 600;
    color: #333;
}

.quick-actions {
    opacity: 0;
    transition: opacity 0.3s ease;
}

.stock-bar .progress {
    border-radius: 10px;
}

.countdown-timer .badge {
    font-size: 14px;
    padding: 8px 12px;
}

.flash-sale-banner {
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.4); }
    70% { box-shadow: 0 0 0 10px rgba(220, 53, 69, 0); }
    100% { box-shadow: 0 0 0 0 rgba(220, 53, 69, 0); }
}
</style>
{% endblock %}
